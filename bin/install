#!/usr/bin/env bash

set -euo pipefail

# shellcheck source=/dev/null
source "$(dirname "$0")/utils.sh"

install_docker() {
  local version=$1
  local install_path=$2

  if [ ! -d "$ASDF_DOWNLOAD_PATH" ]; then
    echo "∗ Downloading Docker client..."
    bash "$(dirname "$0")/download"
  fi

  echo "∗ Creating bin directory..."
  mkdir -p "${install_path}/bin"

  echo "∗ Installing Docker client..."
  mv "${ASDF_DOWNLOAD_PATH}/docker/docker" "${install_path}/bin/"
  chmod +x "${install_path}/bin/docker"

  echo "∗ Docker client ${version} installation complete"
}

install_docker "$ASDF_INSTALL_VERSION" "$ASDF_INSTALL_PATH"
